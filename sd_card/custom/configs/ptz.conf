# PTZ runtime config for /tmp/sd/custom/bin/ptzctl
# Format: strict KEY=value lines.

# Process name is only relevant if you use legacy PID/mem backend.
ANYKA_PROC=anyka_ipc

# Motor backend:
#   0 = auto (prefer /dev nodes; fallback to legacy)
#   1 = /dev nodes (recommended)
#   2 = legacy /proc/<pid>/mem + /proc/<pid>/fd
# If you still need the legacy backend for some units, set MOTOR_BACKEND=0
# and keep the PAN_FD_ADDR/TILT_FD_ADDR lines uncommented.
MOTOR_BACKEND=1

# Direct device nodes (firmware-backed, stable)
# If your firmware does not expose /dev/motor0 and /dev/motor1
# but uses different node names, change only PAN_DEV and TILT_DEV
# (everything else stays the same).
PAN_DEV=/dev/motor0
TILT_DEV=/dev/motor1

# Legacy FD stealing (only if MOTOR_BACKEND=2 or auto fallback)
#PAN_FD_ADDR=0x537760
#TILT_FD_ADDR=0x5377d0

# IOCTL map
IOCTL_SET_SPEED=0x40046d20
IOCTL_MOVE=0x40046d40
IOCTL_STOP=0x40046d42
IOCTL_GET_STATE=0x40046d43
IOCTL_TURN_MIDDLE=0x40046d60

PAN_MAX_DEG=360
PAN_TOTAL_STEPS=4096
TILT_MAX_DEG=196
TILT_TOTAL_STEPS=2230

# Direction calibration
PAN_INVERT=0
TILT_INVERT=1

# Motion tuning
STEP_MULT=4
STEP_REPEAT=8

# Optional per-axis overrides
PAN_STEP_MULT=4
PAN_STEP_REPEAT=8
TILT_STEP_MULT=1
TILT_STEP_REPEAT=8
# Clamp absolute tilt step after scaling (0 disables clamp)
TILT_STEP_ABS_MAX=1000

# Optional per-direction tilt overrides
TILT_UP_STEP_MULT=1
TILT_UP_STEP_REPEAT=8
TILT_DOWN_STEP_MULT=1
TILT_DOWN_STEP_REPEAT=8
TILT_UP_STEP_ABS_MAX=0
TILT_DOWN_STEP_ABS_MAX=0

# Motor driver speed-step tuning
SET_SPEED_EACH_MOVE=1
PAN_SPEED_STEP=800
TILT_SPEED_STEP=600

# Continuous mode is now foreground + tick-driven (no fork/worker).
# Leave it enabled if you want press-move-until-stop behavior.
CONTINUOUS_MODE=0

# These two are unused in the pure/tick build but harmless if present:
WORKER_INTERVAL_MS=80
CONTINUOUS_STEP_DIV=8
CONTINUOUS_REP=1

# Absolute/relative movement chunking (used by -j/-J)
ABSREL_CHUNK_STEPS=64
ABSREL_INTERVAL_MS=30

ZOOM_SUPPORTED=0

STATE_DIR=/tmp/sd/custom/state
LOG_FILE=/tmp/sd/logs/ptz.log
DEBUG_LOG=0
